{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/jucie/Downloads/ioniclivrodoharrypotter/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { CapacitorSQLite, SQLiteConnection } from '@capacitor-community/sqlite';\nimport * as i0 from \"@angular/core\";\nexport let DatabaseService = /*#__PURE__*/(() => {\n  class DatabaseService {\n    constructor() {\n      this.sqlite = new SQLiteConnection(CapacitorSQLite);\n      this.db = null;\n      this.dbName = 'favoritesDB';\n    }\n    initializeDatabase() {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        try {\n          _this.db = yield _this.sqlite.createConnection(_this.dbName, false, 'no-encryption', 1, false);\n          yield _this.db.open();\n          yield _this.db.execute(`\n        CREATE TABLE IF NOT EXISTS favorites (\n          number INTEGER PRIMARY KEY,\n          originalTitle TEXT NOT NULL,\n          cover TEXT,\n          releaseDate TEXT,\n          pages INTEGER,\n          description TEXT\n        );\n      `);\n          console.log('Database initialized successfully');\n        } catch (error) {\n          console.error('Error initializing database:', error);\n        }\n      })();\n    }\n    addFavorite(book) {\n      var _this2 = this;\n      return _asyncToGenerator(function* () {\n        if (!_this2.db) throw new Error('Database not initialized');\n        try {\n          yield _this2.db.run('INSERT OR IGNORE INTO favorites (number, originalTitle, cover, releaseDate, pages, description) VALUES (?, ?, ?, ?, ?, ?)', [book.number, book.originalTitle, book.cover || '', book.releaseDate || '', book.pages || 0, book.description || '']);\n        } catch (error) {\n          console.error('Error adding favorite:', error);\n        }\n      })();\n    }\n    getFavorites() {\n      var _this3 = this;\n      return _asyncToGenerator(function* () {\n        if (!_this3.db) throw new Error('Database not initialized');\n        try {\n          const result = yield _this3.db.query('SELECT * FROM favorites ORDER BY originalTitle');\n          return result.values?.map(row => ({\n            id: row.number.toString(),\n            number: row.number,\n            originalTitle: row.originalTitle,\n            cover: row.cover,\n            releaseDate: row.releaseDate,\n            pages: row.pages,\n            description: row.description\n          })) || [];\n        } catch (error) {\n          console.error('Error getting favorites:', error);\n          return [];\n        }\n      })();\n    }\n    static {\n      this.ɵfac = function DatabaseService_Factory(t) {\n        return new (t || DatabaseService)();\n      };\n    }\n    static {\n      this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n        token: DatabaseService,\n        factory: DatabaseService.ɵfac,\n        providedIn: 'root'\n      });\n    }\n  }\n  return DatabaseService;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}