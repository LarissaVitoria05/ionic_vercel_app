{"ast":null,"code":"import { map } from 'rxjs/operators';\nimport { environment } from '../../environments/environment';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nexport let ApiService = /*#__PURE__*/(() => {\n  class ApiService {\n    constructor(http) {\n      this.http = http;\n    }\n    getRandomBook() {\n      return this.http.get(environment.apiUrl).pipe(map(res => {\n        const title = res.title || 'Livro sem título';\n        const id = res.id || this.generateSafeId(title);\n        let releaseDateStr = '';\n        if (res.releaseDate) {\n          try {\n            const date = new Date(res.releaseDate);\n            releaseDateStr = isNaN(date.getTime()) ? '' : date.toLocaleDateString('pt-BR');\n          } catch {\n            releaseDateStr = '';\n          }\n        }\n        return {\n          id,\n          number: res.number || 0,\n          title,\n          originalTitle: res.originalTitle || title,\n          releaseDate: res.releaseDate,\n          releaseDateStr,\n          description: res.description || res.summary || '',\n          pages: res.pages || 0,\n          cover: res.cover || ''\n        };\n      }));\n    }\n    generateSafeId(title) {\n      return title.replace(/[^a-zA-Z0-9\\s]/g, '').replace(/\\s+/g, '-').toLowerCase().substring(0, 50) || 'book-' + Date.now();\n    }\n    static {\n      this.ɵfac = function ApiService_Factory(t) {\n        return new (t || ApiService)(i0.ɵɵinject(i1.HttpClient));\n      };\n    }\n    static {\n      this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n        token: ApiService,\n        factory: ApiService.ɵfac,\n        providedIn: 'root'\n      });\n    }\n  }\n  return ApiService;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}