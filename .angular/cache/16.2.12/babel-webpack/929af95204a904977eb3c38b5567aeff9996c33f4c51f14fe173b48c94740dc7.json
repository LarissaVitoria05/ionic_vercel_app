{"ast":null,"code":"import { BehaviorSubject } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { environment } from '../../environments/environment';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"./translation.service\";\nexport let BookService = /*#__PURE__*/(() => {\n  class BookService {\n    constructor(http, translationService) {\n      this.http = http;\n      this.translationService = translationService;\n      this.currentBookSubject = new BehaviorSubject(null);\n      this.currentBook$ = this.currentBookSubject.asObservable();\n    }\n    loadRandomBook() {\n      return this.http.get(environment.apiUrl).pipe(map(book => {\n        if (!book) {\n          throw new Error('Nenhum livro recebido da API');\n        }\n        const processedBook = {\n          ...book,\n          id: book.number || book.id || Date.now(),\n          title: book.title || book.originalTitle || 'Sem título',\n          originalTitle: book.originalTitle || book.title || 'Sem título',\n          description: book.description || book.summary || 'Sem descrição disponível',\n          description_pt: this.translationService.translateDescription(book.description || book.summary || ''),\n          cover: book.cover || '',\n          pages: book.pages || 0,\n          releaseDate: book.releaseDate || ''\n        };\n        this.setCurrentBook(processedBook);\n        return processedBook;\n      }));\n    }\n    setCurrentBook(book) {\n      this.currentBookSubject.next(book);\n    }\n    getCurrentBook() {\n      return this.currentBookSubject.value;\n    }\n    static {\n      this.ɵfac = function BookService_Factory(t) {\n        return new (t || BookService)(i0.ɵɵinject(i1.HttpClient), i0.ɵɵinject(i2.TranslationService));\n      };\n    }\n    static {\n      this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n        token: BookService,\n        factory: BookService.ɵfac,\n        providedIn: 'root'\n      });\n    }\n  }\n  return BookService;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}