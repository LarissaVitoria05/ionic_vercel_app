{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/jucie/Downloads/ioniclivrodoharrypotter/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { Subscription } from 'rxjs';\nexport let BookDetailsPage = class BookDetailsPage {\n  constructor(navCtrl, toastCtrl, route, bookService, favoritesService) {\n    this.navCtrl = navCtrl;\n    this.toastCtrl = toastCtrl;\n    this.route = route;\n    this.bookService = bookService;\n    this.favoritesService = favoritesService;\n    this.book = null;\n    this.isFavorite = false;\n    this.isLoading = true;\n    this.subscription = new Subscription();\n  }\n  ionViewWillEnter() {\n    this.loadBookData();\n  }\n  ngOnDestroy() {\n    this.subscription.unsubscribe();\n  }\n  loadBookData() {\n    this.subscription.unsubscribe();\n    this.subscription = new Subscription();\n    const bookId = +this.route.snapshot.paramMap.get('id');\n    if (bookId) {\n      this.isLoading = true;\n      this.subscription.add(this.bookService.getBookById(bookId).subscribe({\n        next: book => {\n          this.book = book;\n          this.updateFavoriteStatus();\n          this.isLoading = false;\n        },\n        error: error => {\n          console.error('Erro ao carregar livro:', error);\n          this.showToast('Erro ao carregar livro');\n          this.isLoading = false;\n        }\n      }));\n    }\n  }\n  updateFavoriteStatus() {\n    if (this.book) {\n      const bookId = this.book.number || this.book.id;\n      this.isFavorite = this.favoritesService.isFavorite(bookId);\n    }\n  }\n  goBack() {\n    this.navCtrl.navigateBack('/home');\n  }\n  toggleFavorite() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      if (!_this.book) return;\n      const bookId = _this.book.number || _this.book.id;\n      if (_this.isFavorite) {\n        _this.favoritesService.removeFavorite(bookId);\n        _this.showToast('Removido dos favoritos');\n      } else {\n        _this.favoritesService.addFavorite(_this.book);\n        _this.showToast('Adicionado aos favoritos');\n      }\n      _this.updateFavoriteStatus();\n    })();\n  }\n  showToast(message) {\n    var _this2 = this;\n    return _asyncToGenerator(function* () {\n      const toast = yield _this2.toastCtrl.create({\n        message,\n        duration: 2000,\n        position: 'bottom',\n        color: 'success'\n      });\n      yield toast.present();\n    })();\n  }\n};\nBookDetailsPage = __decorate([Component({\n  selector: 'app-book-details',\n  templateUrl: './book-details.page.html',\n  styleUrls: ['./book-details.page.scss']\n})], BookDetailsPage);","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}