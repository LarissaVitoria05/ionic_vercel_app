{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/jucie/Downloads/ioniclivrodoharrypotter/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { Subscription } from 'rxjs';\nexport let HomePage = class HomePage {\n  constructor(bookService, router, loadingCtrl, toastCtrl) {\n    this.bookService = bookService;\n    this.router = router;\n    this.loadingCtrl = loadingCtrl;\n    this.toastCtrl = toastCtrl;\n    this.books = [];\n    this.isLoading = false;\n    this.subscription = new Subscription();\n  }\n  ionViewWillEnter() {\n    this.loadBooks();\n  }\n  ngOnDestroy() {\n    this.subscription.unsubscribe();\n  }\n  loadBooks() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      if (_this.isLoading) return;\n      const loading = yield _this.loadingCtrl.create({\n        message: 'Carregando livros...'\n      });\n      yield loading.present();\n      _this.isLoading = true;\n      _this.subscription.add(_this.bookService.searchBooks('harry potter').subscribe({\n        next: books => {\n          _this.books = books;\n          _this.isLoading = false;\n          loading.dismiss();\n        },\n        error: () => {\n          _this.isLoading = false;\n          loading.dismiss();\n          _this.showError();\n        }\n      }));\n    })();\n  }\n  openDetails(book) {\n    this.router.navigate(['/book-details', book.id]);\n  }\n  showError() {\n    var _this2 = this;\n    return _asyncToGenerator(function* () {\n      const toast = yield _this2.toastCtrl.create({\n        message: 'Erro ao carregar livros',\n        duration: 3000,\n        position: 'bottom',\n        color: 'danger'\n      });\n      yield toast.present();\n    })();\n  }\n};\nHomePage = __decorate([Component({\n  selector: 'app-home',\n  templateUrl: './home.page.html',\n  styleUrls: ['./home.page.scss']\n})], HomePage);","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}