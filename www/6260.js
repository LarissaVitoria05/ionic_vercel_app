"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6260],{6260:(H,g,a)=>{a.r(g),a.d(g,{HomePageModule:()=>O});var l=a(6814),_=a(95),r=a(4532),s=a(9310),p=a(5861),d=a(7394),o=a(6689),u=a(6712);function v(t,c){if(1&t&&(o.TgZ(0,"p",22),o._uU(1),o.qZA()),2&t){const n=o.oxw(2);o.xp6(1),o.hij("Livro ",n.book.number,"")}}function f(t,c){if(1&t){const n=o.EpF();o.TgZ(0,"span",26),o.NdJ("click",function(){o.CHM(n);const i=o.oxw(3);return o.KtG(i.openDetails())}),o._uU(1,"... ler mais"),o.qZA()}}function b(t,c){if(1&t&&(o.TgZ(0,"div",23)(1,"h3"),o._uU(2,"Descri\xe7\xe3o:"),o.qZA(),o.TgZ(3,"p",24),o._uU(4),o.YNc(5,f,2,0,"span",25),o.qZA()()),2&t){const n=o.oxw(2);o.xp6(4),o.hij(" ",n.getDescriptionPreview()," "),o.xp6(1),o.Q6J("ngIf",n.getDescriptionPreview().length>=150)}}function h(t,c){if(1&t&&(o.TgZ(0,"p"),o._UZ(1,"ion-icon",29),o._uU(2),o.qZA()),2&t){const n=o.oxw(3);o.xp6(2),o.hij(" ",n.book.releaseDate," ")}}function k(t,c){if(1&t&&(o.TgZ(0,"p"),o._UZ(1,"ion-icon",30),o._uU(2),o.qZA()),2&t){const n=o.oxw(3);o.xp6(2),o.hij(" ",n.book.pages," p\xe1ginas ")}}function x(t,c){if(1&t&&(o.TgZ(0,"div",27),o.YNc(1,h,3,1,"p",28),o.YNc(2,k,3,1,"p",28),o.qZA()),2&t){const n=o.oxw(2);o.xp6(1),o.Q6J("ngIf",n.book.releaseDate),o.xp6(1),o.Q6J("ngIf",n.book.pages)}}function P(t,c){if(1&t){const n=o.EpF();o.TgZ(0,"div",7)(1,"div",8)(2,"h2"),o._uU(3),o.qZA(),o.YNc(4,v,2,1,"p",9),o.qZA(),o.TgZ(5,"div",10),o.NdJ("click",function(){o.CHM(n);const i=o.oxw();return o.KtG(i.openDetails())}),o._UZ(6,"img",11),o.TgZ(7,"p",12),o._uU(8,"Toque na capa para ver detalhes completos"),o.qZA()(),o.YNc(9,b,6,2,"div",13),o.YNc(10,x,3,2,"div",14),o.TgZ(11,"div",15)(12,"ion-button",16),o.NdJ("click",function(){o.CHM(n);const i=o.oxw();return o.KtG(i.openDetails())}),o._UZ(13,"ion-icon",17),o._uU(14," Ver Detalhes Completos "),o.qZA(),o.TgZ(15,"ion-button",18),o._UZ(16,"ion-icon",19),o._uU(17," Meus Favoritos "),o.qZA(),o.TgZ(18,"ion-button",20),o.NdJ("click",function(){o.CHM(n);const i=o.oxw();return o.KtG(i.refreshBook())}),o._UZ(19,"ion-icon",21),o._uU(20," Novo Livro Aleat\xf3rio "),o.qZA()()()}if(2&t){const n=o.oxw();o.xp6(3),o.Oqu(n.book.originalTitle||n.book.title),o.xp6(1),o.Q6J("ngIf",n.book.number),o.xp6(2),o.Q6J("src",n.book.cover,o.LSH)("alt",n.book.originalTitle),o.xp6(3),o.Q6J("ngIf",n.getDescriptionPreview()),o.xp6(1),o.Q6J("ngIf",n.book.releaseDate||n.book.pages)}}function C(t,c){1&t&&(o.TgZ(0,"div",31),o._UZ(1,"ion-spinner"),o.TgZ(2,"p"),o._uU(3,"Carregando livro..."),o.qZA()())}function M(t,c){if(1&t){const n=o.EpF();o.TgZ(0,"div",32)(1,"ion-card")(2,"ion-card-content")(3,"p"),o._uU(4,"Nenhum livro carregado."),o.qZA(),o.TgZ(5,"ion-button",16),o.NdJ("click",function(){o.CHM(n);const i=o.oxw();return o.KtG(i.loadRandomBook())}),o._uU(6," Carregar Livro "),o.qZA()()()()}}const Z=[{path:"",component:(()=>{class t{constructor(n,e,i,m,w){this.nav=n,this.router=e,this.bookService=i,this.loadingCtrl=m,this.toastCtrl=w,this.isLoading=!1,this.subscription=new d.w0}ionViewWillEnter(){this.book||this.loadRandomBook()}ngOnDestroy(){this.subscription.unsubscribe()}loadRandomBook(){var n=this;return(0,p.Z)(function*(){n.isLoading||(n.isLoading=!0,n.subscription.unsubscribe(),n.subscription=new d.w0,n.subscription.add(n.bookService.loadRandomBook().subscribe({next:e=>{n.book=e,n.isLoading=!1},error:e=>{console.error("Erro ao carregar livro:",e),n.isLoading=!1,n.showErrorMessage()}})))})()}openDetails(){this.book&&(this.bookService.setCurrentBook(this.book),this.router.navigate(["/book-details"],{state:{book:this.book}}))}refreshBook(){this.loadRandomBook()}getDescriptionPreview(){if(!this.book)return"";const n=this.book.description_pt||this.book.description||"";return n.length<=150?n:n.substring(0,150).trim()}showErrorMessage(){var n=this;return(0,p.Z)(function*(){yield(yield n.toastCtrl.create({message:"Erro ao carregar livro. Tente novamente.",duration:3e3,position:"bottom",color:"danger",buttons:[{text:"Tentar Novamente",handler:()=>{n.loadRandomBook()}}]})).present()})()}static{this.\u0275fac=function(e){return new(e||t)(o.Y36(r.SH),o.Y36(s.F0),o.Y36(u.Z),o.Y36(r.HT),o.Y36(r.yF))}}static{this.\u0275cmp=o.Xpm({type:t,selectors:[["app-home"]],decls:11,vars:4,consts:[["slot","end"],[3,"disabled","click"],["name","refresh"],[1,"ion-padding"],["class","book-card",4,"ngIf"],["class","loading",4,"ngIf"],["class","no-book",4,"ngIf"],[1,"book-card"],[1,"book-header"],["class","book-number",4,"ngIf"],[1,"cover",3,"click"],[3,"src","alt"],[1,"tap-hint"],["class","book-preview",4,"ngIf"],["class","book-info",4,"ngIf"],[1,"actions"],["expand","block",3,"click"],["name","book","slot","start"],["expand","block","fill","outline","color","danger","routerLink","/favorites"],["name","heart","slot","start"],["expand","block","fill","clear",3,"click"],["name","refresh","slot","start"],[1,"book-number"],[1,"book-preview"],[1,"description-preview"],["class","read-more",3,"click",4,"ngIf"],[1,"read-more",3,"click"],[1,"book-info"],[4,"ngIf"],["name","calendar","color","primary"],["name","document-text","color","primary"],[1,"loading"],[1,"no-book"]],template:function(e,i){1&e&&(o.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),o._uU(3,"Livros do Harry Potter"),o.qZA(),o.TgZ(4,"ion-buttons",0)(5,"ion-button",1),o.NdJ("click",function(){return i.refreshBook()}),o._UZ(6,"ion-icon",2),o.qZA()()()(),o.TgZ(7,"ion-content",3),o.YNc(8,P,21,6,"div",4),o.YNc(9,C,4,0,"div",5),o.YNc(10,M,7,0,"div",6),o.qZA()),2&e&&(o.xp6(5),o.Q6J("disabled",i.isLoading),o.xp6(3),o.Q6J("ngIf",i.book&&!i.isLoading),o.xp6(1),o.Q6J("ngIf",i.isLoading),o.xp6(1),o.Q6J("ngIf",!i.book&&!i.isLoading))},dependencies:[l.O5,r.YG,r.Sm,r.PM,r.FN,r.W2,r.Gu,r.gu,r.PQ,r.wd,r.sr,r.YI,s.rH],styles:[".book-card[_ngcontent-%COMP%]{text-align:center;padding:20px}.book-header[_ngcontent-%COMP%]{margin-bottom:20px}.book-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:var(--ion-color-primary);font-size:1.5rem;font-weight:600;margin-bottom:8px}.book-header[_ngcontent-%COMP%]   .book-number[_ngcontent-%COMP%]{color:var(--ion-color-medium);font-size:1rem;margin:0}.cover[_ngcontent-%COMP%]{margin:20px 0;cursor:pointer;transition:transform .2s ease}.cover[_ngcontent-%COMP%]:hover{transform:scale(1.02)}.cover[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:300px;max-width:250px;height:auto;width:auto;border-radius:8px;box-shadow:0 4px 12px #0000004d}.cover[_ngcontent-%COMP%]   .tap-hint[_ngcontent-%COMP%]{margin-top:10px;color:var(--ion-color-medium);font-size:.9rem;font-style:italic}.book-preview[_ngcontent-%COMP%]{margin:20px 0;text-align:left}.book-preview[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--ion-color-primary);font-size:1.1rem;font-weight:600;margin-bottom:10px}.book-preview[_ngcontent-%COMP%]   .description-preview[_ngcontent-%COMP%]{color:var(--ion-color-dark);line-height:1.5;margin:0}.book-preview[_ngcontent-%COMP%]   .description-preview[_ngcontent-%COMP%]   .read-more[_ngcontent-%COMP%]{color:var(--ion-color-primary);font-weight:600;cursor:pointer;text-decoration:underline}.book-preview[_ngcontent-%COMP%]   .description-preview[_ngcontent-%COMP%]   .read-more[_ngcontent-%COMP%]:hover{color:var(--ion-color-primary-shade)}.book-info[_ngcontent-%COMP%]{margin:15px 0;display:flex;justify-content:center;gap:20px;flex-wrap:wrap}.book-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{display:flex;align-items:center;gap:5px;margin:0;color:var(--ion-color-medium);font-size:.9rem}.book-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1rem}.actions[_ngcontent-%COMP%]{margin-top:30px}.actions[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin-bottom:10px}.loading[_ngcontent-%COMP%]{text-align:center;padding:50px}.loading[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{margin-bottom:20px}.loading[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--ion-color-medium);font-size:1.1rem}.no-book[_ngcontent-%COMP%]{margin-top:50px;text-align:center}"]})}}return t})()}];let T=(()=>{class t{static{this.\u0275fac=function(e){return new(e||t)}}static{this.\u0275mod=o.oAB({type:t})}static{this.\u0275inj=o.cJS({imports:[s.Bz.forChild(Z),s.Bz]})}}return t})(),O=(()=>{class t{static{this.\u0275fac=function(e){return new(e||t)}}static{this.\u0275mod=o.oAB({type:t})}static{this.\u0275inj=o.cJS({imports:[l.ez,_.u5,r.Pc,T]})}}return t})()}}]);